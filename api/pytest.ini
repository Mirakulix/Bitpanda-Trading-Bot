[tool:pytest]
# Test configuration for API service
minversion = 6.0
addopts = -ra -q --strict-markers --disable-warnings
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Async testing support
asyncio_mode = auto

# Coverage configuration
addopts = --cov=app --cov-report=term-missing --cov-report=html --cov-report=xml
--cov-fail-under=80

# Markers for test categories
markers =
    unit: Unit tests that test individual components in isolation
    integration: Integration tests that test component interactions
    e2e: End-to-end tests that test complete user workflows
    slow: Tests that take a long time to run
    external_api: Tests that require external API access
    database: Tests that require database access
    auth: Tests related to authentication and authorization
    trading: Tests related to trading functionality
    ai: Tests related to AI analysis services
    paper: Tests that only run in paper trading mode
    live: Tests that require live trading (dangerous - use with caution)

# Filtering
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Test discovery
norecursedirs = .git .tox node_modules __pycache__ .pytest_cache